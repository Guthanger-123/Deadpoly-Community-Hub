<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>DeadPoly Hub — Wiki Hub</title>
  <link rel="stylesheet" href="wiki-shared.css" />
</head>
<body>
  <div class="topbar">
    <div class="topbar-inner">
      <div class="top-left">
        <a class="btn" href="index.html">← Menu</a>
        <div class="brand">Wiki <span class="badge">Hub</span> <span class="badge"><b>Work In Progress</b></span></div>
      </div>
      <div class="top-right">
        <a class="btn" href="https://deadpoly.wiki/Main_Page" target="_blank" rel="noopener">Official Wiki ↗</a>
      </div>
    </div>
  </div>

  <div class="container">
    <div class="shell">
      <div class="panel side">
        <h2>Wiki Categories</h2>
        <div class="muted">Local pages (fast) + one official button above.</div>

        <div class="nav">
          <a class="active" href="wiki.html"><span>Hub</span><span class="small">→</span></a>
          <a href="weapons.html"><span>Weapons</span><span class="small">→</span></a>
          <a href="masks.html"><span>Masks</span><span class="small">→</span></a>
          <a href="armor.html"><span>Armor</span><span class="small">→</span></a>
          <a href="ammo.html"><span>Ammo</span><span class="small">→</span></a>
          <a href="helmets.html"><span>Helmets</span><span class="small">→</span></a>
          <a href="consumables.html"><span>Consumables</span><span class="small">→</span></a>
          <a href="crafting.html"><span>Crafting</span><span class="small">→</span></a>
          <a href="backpacks.html"><span>Backpacks</span><span class="small">→</span></a>
          <a href="collectibles.html"><span>Collectibles</span><span class="small">→</span></a>
          <a href="modeler.html"><span>Character Customizer</span><span class="small">→</span></a>
        </div>

        <div class="note">
          <b>Global search</b> looks through your local pages and links you straight to the matching item.
          <div class="small" style="margin-top:6px">
            If images don’t show: you’re offline or a mixed-content blocker is on. Images are hotlinked from
            <span class="code">deadpoly.wiki/Special:FilePath</span>.
            <b>Please keep in mind some data is going to be incorrect and or broken.</b>
          </div>
        </div>
      </div>

      <div class="panel main">
        <div class="hero">
          <div>
            <h1>Community Wiki Hub</h1>
            <div class="sub">
              Pick a category on the left, or search the whole hub.
              Results jump to the exact item on its page.
            </div>
          </div>
          <div class="badge" id="countBadge">0 results</div>
        </div>

        <div class="toolbar">
          <input id="q" class="search" placeholder="Search everything (ex: Raid Backpack, Water Bottle, Workbench, Neon, Helmet)..." />
          <div class="viewtoggle">
            <button class="btn" id="clearBtn" type="button">Clear</button>
          </div>
        </div>

        <div id="results" class="grid"></div>

        <div class="section">
          <h2>Quick links</h2>
          <div class="small">Fast jump to local pages:</div>

          <div class="grid" style="margin-top:10px">

            <a class="card" href="helmets.html" style="text-decoration:none">
              <div class="row">
                <div class="thumb"><img alt="" src="https://deadpoly.wiki/Special:FilePath/TM_HelmOfMight_E.png" onerror="this.style.display='none'"></div>
                <div><h3>Helmets</h3><div class="small">Head protection + variants</div></div>
              </div>
            </a>

            <a class="card" href="backpacks.html" style="text-decoration:none">
              <div class="row">
                <div class="thumb"><img alt="" src="https://deadpoly.wiki/Special:FilePath/TM_BackpackRaid_1_E.png" onerror="this.style.display='none'"></div>
                <div><h3>Backpacks</h3><div class="small">Tiers + nesting rules</div></div>
              </div>
            </a>

            <a class="card" href="consumables.html" style="text-decoration:none">
              <div class="row">
                <div class="thumb"><img alt="" src="https://deadpoly.wiki/Special:FilePath/TM_WaterBottle_B_E.png" onerror="this.style.display='none'"></div>
                <div><h3>Consumables</h3><div class="small">Food + drinks + medicines</div></div>
              </div>
            </a>

            <a class="card" href="crafting.html" style="text-decoration:none">
              <div class="row">
                <div class="thumb"><div class="small">Station</div></div>
                <div><h3>Crafting</h3><div class="small">Stations + production</div></div>
              </div>
            </a>

            <a class="card" href="collectibles.html" style="text-decoration:none">
              <div class="row">
                <div class="thumb"><img alt="" src="https://deadpoly.wiki/Special:FilePath/Skull%20neon.png" onerror="this.style.display='none'"></div>
                <div><h3>Collectibles</h3><div class="small">Neons + lamps + posters</div></div>
              </div>
            </a>

            <!-- ✅ NEW: Character Modeler quick link -->
            <a class="card" href="modeler.html" style="text-decoration:none">
              <div class="row">
                <div class="thumb"><div class="small">FBX</div></div>
                <div><h3>Character Modeler</h3><div class="small">Swap shirt/pants/shoes/helmet/mask/backpack</div></div>
              </div>
            </a>

          </div>
        </div>

      </div>
    </div>
  </div>

  <script src="wiki-shared.js"></script>
  <script>
    // Search index for hub search -> links to page#id
    // NOTE: For modeler we don't need an #anchor, so use id:"top" and link to modeler.html.
    const INDEX = [
      // Helmets
      { name:"Crown of the Trickster", page:"helmets.html", id:"crown-of-the-trickster", img:"TM_LokiHelm_I.png", tags:["Helmets"], notes:"Helmet / head item" },
      { name:"Neck Collar", page:"helmets.html", id:"neck-collar", img:"TM_HelmOfMight_E.png", tags:["Helmets"], notes:"Neck/face slot item" },

      // Backpacks
      { name:"Raid Backpack", page:"backpacks.html", id:"raid-backpack", img:"TM_BackpackRaid_1_E.png", tags:["Backpacks","Tier 3"], notes:"152 slots total" },
      { name:"Rush Backpack (Gold Variant)", page:"backpacks.html", id:"rush-backpack-gold-variant", img:"TM_BackpackRushGold_E.png", tags:["Backpacks","Tier 3"] },
      { name:"Bag", page:"backpacks.html", id:"bag", img:"TM_Bag_E.png", tags:["Backpacks","Tier 1"] },

      // Consumables
      { name:"Water Bottle", page:"consumables.html", id:"water-bottle", img:"TM_WaterBottle_B_E.png", tags:["Consumables","Beverages"], notes:"Refillable bottle" },
      { name:"Medical Kit", page:"consumables.html", id:"medical-kit", img:"", tags:["Consumables","Medicines"], notes:"Healing item" },

      // Crafting
      { name:"Workbench", page:"crafting.html", id:"workbench", img:"", tags:["Crafting","Station"], notes:"Craft in inventory" },
      { name:"Anvil", page:"crafting.html", id:"anvil", img:"", tags:["Crafting","Station"] },
      { name:"Distiller", page:"crafting.html", id:"distiller", img:"", tags:["Crafting","Production"] },

      // Collectibles
      { name:"Skull Neon", page:"collectibles.html", id:"skull-neon", img:"Skull neon.png", tags:["Collectibles","Neon Signs"], notes:"Red" },
      { name:"QR Sign", page:"collectibles.html", id:"qr-sign", img:"Qr sign.png", tags:["Collectibles","Posters"] },

      // ✅ Character Modeler (search hit)
      { name:"Character Modeler", page:"modeler.html", id:"", img:"", tags:["Tools","FBX"], notes:"Modular character gear builder (local FBX)" }
    ];

    const qEl = document.getElementById("q");
    const resultsEl = document.getElementById("results");
    const countBadge = document.getElementById("countBadge");
    document.getElementById("clearBtn").onclick = ()=>{ qEl.value=""; render(); qEl.focus(); };

    function escapeHtml(s){
      return String(s).replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]));
    }
    function imgUrl(fileName){
      if(!fileName) return "";
      return "https://deadpoly.wiki/Special:FilePath/" + encodeURIComponent(fileName);
    }
    function match(it, q){
      if(!q) return true;
      const hay = [it.name, it.notes, ...(it.tags||[]), ...(it.search||[])].join(" ").toLowerCase();
      return hay.includes(q.toLowerCase());
    }

    function render(){
      const q = qEl.value.trim();
      const hits = INDEX.filter(it => match(it,q));
      countBadge.textContent = `${hits.length} results`;
      resultsEl.innerHTML = "";

      if(!q){
        resultsEl.innerHTML = `
          <div class="section">
            <h2>Search the hub</h2>
            <div class="small">Type a name to jump to the exact item on a page.</div>
          </div>
        `;
        countBadge.textContent = "0 results";
        return;
      }

      hits.slice(0, 48).forEach(it=>{
        const a = document.createElement("a");
        a.className = "card";
        a.href = it.id ? `${it.page}#${it.id}` : `${it.page}`;
        a.style.textDecoration = "none";
        const img = it.img ? `<img alt="" src="${imgUrl(it.img)}" onerror="this.style.display='none'">` : "";
        a.innerHTML = `
          <div class="row">
            <div class="thumb">${img || `<div class="small">page</div>`}</div>
            <div style="min-width:0">
              <h3>${escapeHtml(it.name)}</h3>
              <div class="small">${escapeHtml(it.page)}${it.notes ? " • " + escapeHtml(it.notes) : ""}</div>
              <div class="meta">${(it.tags||[]).slice(0,3).map(t=>`<span class="tag">${escapeHtml(t)}</span>`).join("")}</div>
            </div>
          </div>
        `;
        resultsEl.appendChild(a);
      });
    }

    qEl.addEventListener("input", render);
    render();
  </script>
</body>
</html>
