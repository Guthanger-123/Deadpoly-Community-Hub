<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>DeadPoly Hub — Wiki (3D Viewer)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    :root{
      --bg:#07080c;
      --panel:rgba(255,255,255,.06);
      --panel2:rgba(255,255,255,.045);
      --line:rgba(255,255,255,.08);
      --text:rgba(255,255,255,.92);
      --muted:rgba(255,255,255,.65);
      --btn:rgba(255,255,255,.08);
      --btn2:rgba(255,255,255,.12);
      --accent:#6ea8ff;
      --radius:14px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      background: radial-gradient(1200px 700px at 25% 10%, rgba(90,140,255,.15), transparent 55%),
                  radial-gradient(900px 600px at 70% 20%, rgba(255,255,255,.06), transparent 60%),
                  var(--bg);
      color:var(--text);
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      overflow:hidden;
    }

    /* Top bar */
    .topbar{
      height:56px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding:0 14px;
      border-bottom:1px solid var(--line);
      background:linear-gradient(to bottom, rgba(0,0,0,.55), rgba(0,0,0,.2));
    }
    .leftTop{display:flex;align-items:center;gap:10px}
    .brand{font-weight:800; letter-spacing:.3px}
    .hint{color:var(--muted); font-size:12px}
    .topBtns{display:flex;gap:10px;align-items:center}
    .pill{
      display:inline-flex;align-items:center;gap:8px;
      padding:8px 12px;border:1px solid var(--line);
      background:var(--btn); color:var(--text);
      border-radius:999px; text-decoration:none;
      transition:background .15s,border-color .15s, transform .02s;
      font-weight:600; font-size:13px;
    }
    .pill:hover{background:var(--btn2); border-color:rgba(255,255,255,.15)}
    .pill:active{transform:translateY(1px)}
    .pill.primary{border-color:rgba(110,168,255,.45)}
    .pill.primary:hover{border-color:rgba(110,168,255,.75)}

    /* Layout */
    .wrap{
      height:calc(100% - 56px);
      display:grid;
      grid-template-columns: 360px 1fr;
      gap:14px;
      padding:14px;
    }

    /* Sidebar */
    .sidebar{
      border:1px solid var(--line);
      background:linear-gradient(to bottom, rgba(255,255,255,.06), rgba(255,255,255,.03));
      border-radius:var(--radius);
      overflow:hidden;
      display:flex;
      flex-direction:column;
      min-height:0;
    }
    .sideHeader{
      padding:12px 12px 10px;
      border-bottom:1px solid var(--line);
      display:flex; align-items:center; justify-content:space-between; gap:10px;
    }
    .tabs{display:flex; gap:8px}
    .tabBtn{
      padding:8px 10px;
      border-radius:999px;
      border:1px solid var(--line);
      background:var(--btn);
      color:var(--text);
      font-weight:700;
      font-size:12px;
      cursor:pointer;
    }
    .tabBtn.active{border-color:rgba(110,168,255,.6); background:rgba(110,168,255,.12)}
    .sideBody{
      padding:12px;
      overflow:auto;
      min-height:0;
    }

    details{
      border:1px solid var(--line);
      border-radius:12px;
      background:var(--panel2);
      margin-bottom:10px;
      overflow:hidden;
    }
    summary{
      cursor:pointer;
      padding:10px 12px;
      font-weight:800;
      list-style:none;
      display:flex; align-items:center; justify-content:space-between;
    }
    summary::-webkit-details-marker{display:none}
    .catInner{padding:0 12px 12px}
    .item{
      border:1px solid var(--line);
      background:rgba(0,0,0,.25);
      border-radius:12px;
      padding:10px 10px;
      margin-top:10px;
    }
    .itemTitle{font-weight:900; font-size:13px}
    .itemText{color:var(--muted); font-size:12px; margin-top:6px; line-height:1.35}
    .row{
      display:flex; gap:8px; flex-wrap:wrap; margin-top:10px;
    }
    .miniBtn{
      padding:7px 10px;
      border-radius:10px;
      border:1px solid var(--line);
      background:var(--btn);
      color:var(--text);
      font-weight:700;
      font-size:12px;
      cursor:pointer;
    }
    .miniBtn:hover{background:var(--btn2)}
    .miniBtn.primary{border-color:rgba(110,168,255,.55)}

    /* Main viewer */
    .main{
      border:1px solid var(--line);
      background:linear-gradient(to bottom, rgba(255,255,255,.06), rgba(255,255,255,.03));
      border-radius:var(--radius);
      overflow:hidden;
      display:grid;
      grid-template-columns: 1fr 320px;
      min-height:0;
    }
    .stageWrap{
      position:relative;
      min-height:0;
      border-right:1px solid var(--line);
    }
    #stage{
      position:absolute; inset:0;
    }
    .hud{
      position:absolute;
      left:12px; bottom:12px;
      background:rgba(0,0,0,.45);
      border:1px solid var(--line);
      border-radius:12px;
      padding:10px 10px;
      color:var(--muted);
      font-size:12px;
      max-width: 70%;
      pointer-events:none;
    }
    .side{
      padding:12px;
      overflow:auto;
      min-height:0;
    }
    .panelTitle{font-weight:900; margin:2px 0 8px}
    .small{color:var(--muted); font-size:12px; line-height:1.35}
    .btnCol{display:grid; gap:10px; margin-top:10px}
    .bigBtn{
      padding:10px 12px;
      border-radius:12px;
      border:1px solid var(--line);
      background:var(--btn);
      color:var(--text);
      font-weight:800;
      cursor:pointer;
    }
    .bigBtn:hover{background:var(--btn2)}
    .bigBtn.primary{border-color:rgba(110,168,255,.6); background:rgba(110,168,255,.12)}
    .field{
      margin-top:12px;
      border:1px solid var(--line);
      background:rgba(0,0,0,.25);
      border-radius:12px;
      padding:10px;
    }
    .field label{
      display:block;
      font-weight:900;
      font-size:12px;
      margin-bottom:8px;
      color:var(--muted);
    }
    select{
      width:100%;
      padding:10px 10px;
      border-radius:10px;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(0,0,0,.35);
      color:var(--text);
      outline:none;
    }
    .status{
      margin-top:12px;
      padding:10px;
      border-radius:12px;
      border:1px solid var(--line);
      background:rgba(0,0,0,.35);
      font-size:12px;
      color:var(--muted);
      white-space:pre-wrap;
      word-break:break-word;
    }

    /* Mobile */
    @media (max-width: 980px){
      body{overflow:auto}
      .wrap{
        height:auto;
        grid-template-columns: 1fr;
      }
      .main{
        grid-template-columns: 1fr;
      }
      .stageWrap{min-height:520px; border-right:none; border-bottom:1px solid var(--line)}
      .topbar{position:sticky; top:0; z-index:5}
    }
  </style>
</head>

<body>
  <div class="topbar">
    <div class="leftTop">
      <a class="pill" href="index.html">← Menu</a>
      <div class="brand">Wiki — 3D Viewer</div>
      <div class="hint">Drag rotate • Scroll zoom • Right-drag pan</div>
    </div>
    <div class="topBtns">
      <a class="pill" href="tips.html">Tips</a>
      <a class="pill primary" href="maps.html">Maps</a>
    </div>
  </div>

  <div class="wrap">
    <!-- LEFT: Wiki / Categories -->
    <div class="sidebar">
      <div class="sideHeader">
        <div class="tabs">
          <button class="tabBtn active" id="tabWiki">Wiki</button>
          <button class="tabBtn" id="tabNotes">Notes</button>
        </div>
        <span class="hint">Left = info • Right = 3D</span>
      </div>

      <div class="sideBody" id="wikiPane">
        <details open>
          <summary>Getting Started <span class="hint">Basics</span></summary>
          <div class="catInner">
            <div class="item">
              <div class="itemTitle">How to add new parts</div>
              <div class="itemText">
                Upload FBX to <b>assets/models/</b> and add it to the <b>PARTS</b> list in this file
                (search “PARTS CONFIG”). Refresh — it appears in the dropdown.
              </div>
            </div>

            <div class="item">
              <div class="itemTitle">Why models sometimes look black</div>
              <div class="itemText">
                FBX often imports without textures bound. Use <b>Apply Base Textures</b> on the right
                (only affects meshes that accept it). Also make sure the textures exist in <b>assets/texture/</b>.
              </div>
            </div>

            <div class="item">
              <div class="itemTitle">Quick test if your FBX is real on GitHub Pages</div>
              <div class="itemText">
                Open: <b>/assets/models/SK_BaseModel.fbx</b> in your browser.
                If it downloads a tiny file or shows LFS text, it’s not the real FBX binary.
              </div>
            </div>
          </div>
        </details>

        <details>
          <summary>Items / Gear <span class="hint">WIP</span></summary>
          <div class="catInner">
            <div class="item">
              <div class="itemTitle">Example entry</div>
              <div class="itemText">You can add real wiki cards like this per item.</div>
              <div class="row">
                <button class="miniBtn primary" id="btnLoadBaseFromWiki">Load Base Model</button>
                <button class="miniBtn" id="btnResetViewFromWiki">Reset View</button>
              </div>
            </div>
          </div>
        </details>

        <details>
          <summary>Enemies <span class="hint">WIP</span></summary>
          <div class="catInner">
            <div class="item">
              <div class="itemTitle">Placeholder</div>
              <div class="itemText">Add enemy info + images later.</div>
            </div>
          </div>
        </details>
      </div>

      <div class="sideBody" id="notesPane" style="display:none">
        <div class="item">
          <div class="itemTitle">Dev Notes</div>
          <div class="itemText">
            This page uses Three.js + FBXLoader. GitHub Pages can’t serve Git LFS pointer files as real FBX.
            If your FBX is “2 bytes” on GitHub, you must re-upload as real binary or stop tracking FBX with LFS.
          </div>
        </div>
      </div>
    </div>

    <!-- RIGHT: Viewer + Dresser -->
    <div class="main">
      <div class="stageWrap">
        <div id="stage"></div>
        <div class="hud">Tip: after loading a model, hit <b>Reset View</b> if it’s off-screen.</div>
      </div>

      <div class="side">
        <div class="panelTitle">Controls</div>
        <div class="small">Loads FBX from <b>assets/models/</b></div>

        <div class="btnCol">
          <button class="bigBtn primary" id="btnLoadBase">Load Base Model</button>
          <button class="bigBtn" id="btnResetView">Reset View</button>
          <button class="bigBtn" id="btnApplyTextures">Apply Base Textures</button>
          <button class="bigBtn" id="btnClear">Clear Scene</button>
        </div>

        <div class="field">
          <label>Head</label>
          <select id="selHead"></select>
        </div>
        <div class="field">
          <label>Hair</label>
          <select id="selHair"></select>
        </div>
        <div class="field">
          <label>Face / Mask</label>
          <select id="selFace"></select>
        </div>
        <div class="field">
          <label>Torso</label>
          <select id="selTorso"></select>
        </div>
        <div class="field">
          <label>Arms (Upper / Lower)</label>
          <select id="selArms"></select>
        </div>
        <div class="field">
          <label>Hands</label>
          <select id="selHands"></select>
        </div>
        <div class="field">
          <label>Hips</label>
          <select id="selHips"></select>
        </div>
        <div class="field">
          <label>Legs / Knees</label>
          <select id="selLegs"></select>
        </div>
        <div class="field">
          <label>Feet</label>
          <select id="selFeet"></select>
        </div>

        <div class="status" id="status">Status: Ready.</div>
      </div>
    </div>
  </div>

  <!-- Three.js (modules) -->
  <script type="module">
    import * as THREE from "https://unpkg.com/three@0.160.0/build/three.module.js";
    import { OrbitControls } from "https://unpkg.com/three@0.160.0/examples/jsm/controls/OrbitControls.js";
    import { FBXLoader } from "https://unpkg.com/three@0.160.0/examples/jsm/loaders/FBXLoader.js";

    /* ==================== PATHS ==================== */
    const BASE_FBX = "assets/models/SK_BaseModel.fbx";

    // Optional textures (apply button tries these)
    const TEX = {
      color:      "assets/texture/T_ColorMap.png",
      opacity:    "assets/texture/T_OpacityMap.png",
      smoothness: "assets/texture/T_SmoothnessMap.png",
      emission:   "assets/texture/T_EmissionMap.png",
      // reflection map is not a standard PBR map in three; leaving it out on purpose
    };

    /* ==================== PARTS CONFIG (EDIT HERE) ==================== */
    // Put files exactly as they appear in /assets/models/ (case-sensitive).
    // “None” means remove that slot.
    const PARTS = {
      head: [
        { name:"None", file:"" },
        { name:"Fantasy Knight Head", file:"assets/models/SK_FANT_KNGT_17_22AHED_HU01.fbx" },
        { name:"SciFi Civilian Head", file:"assets/models/SK_SCFI_CIVL_09_22AHED_HU01.fbx" },
        { name:"Horror Villain Head", file:"assets/models/SK_HORR_VILN_01_22AHED_HU01.fbx" },
        { name:"SciFi Civ 10 Head", file:"assets/models/SK_SCFI_CIVL_10_22AHED_HU01.fbx" },
      ],
      hair: [
        { name:"None", file:"" },
        { name:"SciFi Civilian Hair", file:"assets/models/SK_SCFI_CIVL_09_02HAIR_HU01.fbx" },
      ],
      face: [
        { name:"None", file:"" },
        { name:"Fantasy Knight Face", file:"assets/models/SK_FANT_KNGT_17_23AFAC_HU01.fbx" },
        { name:"SciFi Civilian Face", file:"assets/models/SK_SCFI_CIVL_09_23AFAC_HU01.fbx" },
        { name:"SciFi Civilian Back Acc", file:"assets/models/SK_SCFI_CIVL_09_24ABAC_HU01.fbx" },
      ],
      torso: [
        { name:"None", file:"" },
        { name:"Fantasy Knight Torso", file:"assets/models/SK_FANT_KNGT_17_10TORS_HU01.fbx" },
        { name:"SciFi Civilian Torso", file:"assets/models/SK_SCFI_CIVL_09_10TORS_HU01.fbx" },
      ],
      arms: [
        { name:"None", file:"" },
        { name:"Fantasy Knight Arms (L/R)", file:"assets/models/SK_FANT_KNGT_17_11AUPL_HU01.fbx" }, // example anchor; add more as needed
        { name:"SciFi Civilian Arms (L/R)", file:"assets/models/SK_SCFI_CIVL_09_11AUPL_HU01.fbx" },
      ],
      hands: [
        { name:"None", file:"" },
        { name:"Fantasy Knight Hands", file:"assets/models/SK_FANT_KNGT_17_15HNDL_HU01.fbx" },
        { name:"SciFi Civilian Hands", file:"assets/models/SK_SCFI_CIVL_09_15HNDL_HU01.fbx" },
      ],
      hips: [
        { name:"None", file:"" },
        { name:"Fantasy Knight Hips", file:"assets/models/SK_FANT_KNGT_17_17HIPS_HU01.fbx" },
        { name:"SciFi Civilian Hips", file:"assets/models/SK_SCFI_CIVL_09_17HIPS_HU01.fbx" },
      ],
      legs: [
        { name:"None", file:"" },
        { name:"Fantasy Knight Legs", file:"assets/models/SK_FANT_KNGT_17_18LEGL_HU01.fbx" },
        { name:"SciFi Civilian Legs", file:"assets/models/SK_SCFI_CIVL_09_18LEGL_HU01.fbx" },
      ],
      feet: [
        { name:"None", file:"" },
        { name:"Fantasy Knight Feet", file:"assets/models/SK_FANT_KNGT_17_20FOTL_HU01.fbx" },
        { name:"SciFi Civilian Feet", file:"assets/models/SK_SCFI_CIVL_09_20FOTL_HU01.fbx" },
      ],
    };

    /* ==================== UI ==================== */
    const $ = (id)=>document.getElementById(id);
    const statusEl = $("status");

    function setStatus(msg){ statusEl.textContent = "Status: " + msg; }

    // left sidebar tabs
    const tabWiki = $("tabWiki"), tabNotes=$("tabNotes");
    const wikiPane=$("wikiPane"), notesPane=$("notesPane");
    tabWiki.onclick=()=>{tabWiki.classList.add("active");tabNotes.classList.remove("active");wikiPane.style.display="block";notesPane.style.display="none";};
    tabNotes.onclick=()=>{tabNotes.classList.add("active");tabWiki.classList.remove("active");notesPane.style.display="block";wikiPane.style.display="none";};

    $("btnLoadBaseFromWiki").onclick=()=>loadBase();
    $("btnResetViewFromWiki").onclick=()=>frameAll();

    /* ==================== THREE CORE ==================== */
    const stage = $("stage");

    const renderer = new THREE.WebGLRenderer({ antialias:true, alpha:true });
    renderer.setPixelRatio(Math.min(devicePixelRatio, 2));
    renderer.outputColorSpace = THREE.SRGBColorSpace;
    stage.appendChild(renderer.domElement);

    const scene = new THREE.Scene();
    scene.background = null;

    const camera = new THREE.PerspectiveCamera(45, 1, 0.01, 5000);
    camera.position.set(0, 1.4, 3.0);

    const controls = new OrbitControls(camera, renderer.domElement);
    controls.enableDamping = true;
    controls.target.set(0, 1.2, 0);

    // Lighting so models aren’t black
    const hemi = new THREE.HemisphereLight(0xffffff, 0x334455, 0.9);
    scene.add(hemi);

    const key = new THREE.DirectionalLight(0xffffff, 1.15);
    key.position.set(3, 6, 4);
    key.castShadow = false;
    scene.add(key);

    const fill = new THREE.DirectionalLight(0xffffff, 0.45);
    fill.position.set(-4, 3, -3);
    scene.add(fill);

    // Helpers (optional)
    const grid = new THREE.GridHelper(10, 10, 0x223344, 0x111722);
    grid.position.y = 0;
    scene.add(grid);

    const axes = new THREE.AxesHelper(0.75);
    axes.position.set(0, 0.02, 0);
    scene.add(axes);

    // resize correctly (most common “blank canvas” cause)
    function resize(){
      const w = stage.clientWidth;
      const h = stage.clientHeight;
      renderer.setSize(w, h, false);
      camera.aspect = w / h;
      camera.updateProjectionMatrix();
    }
    window.addEventListener("resize", resize);
    resize();

    // render loop
    function tick(){
      controls.update();
      renderer.render(scene, camera);
      requestAnimationFrame(tick);
    }
    tick();

    /* ==================== LOADING ==================== */
    const fbxLoader = new FBXLoader();

    // We keep track of objects by slot so changing dropdown replaces that part
    const slots = {
      base: null,
      head: null,
      hair: null,
      face: null,
      torso: null,
      arms: null,
      hands: null,
      hips: null,
      legs: null,
      feet: null
    };

    function clearSlot(slot){
      if (slots[slot]){
        scene.remove(slots[slot]);
        slots[slot].traverse(o=>{
          if (o.geometry) o.geometry.dispose?.();
          if (o.material){
            const mats = Array.isArray(o.material) ? o.material : [o.material];
            mats.forEach(m=>{
              for (const k in m){
                const v = m[k];
                if (v && v.isTexture) v.dispose?.();
              }
              m.dispose?.();
            });
          }
        });
        slots[slot] = null;
      }
    }

    function clearAll(){
      Object.keys(slots).forEach(k=>clearSlot(k));
      setStatus("Cleared scene.");
    }

    async function loadFBX(path, slotName){
      if (!path){
        clearSlot(slotName);
        setStatus(`Removed ${slotName}.`);
        frameAll();
        return;
      }

      setStatus(`Loading ${slotName}… ${path}`);
      return new Promise((resolve, reject)=>{
        fbxLoader.load(
          path,
          (obj)=>{
            // FBX scale is often huge; normalize a bit
            obj.scale.setScalar(0.01); // if yours becomes tiny/huge, adjust to 0.1 or 0.001

            clearSlot(slotName);
            slots[slotName] = obj;
            scene.add(obj);

            // try to keep parts aligned near base (assumes shared origin/skeleton)
            // If parts come in offset, you’ll need to export them with matching origin in Blender/UE.
            if (slots.base && slotName !== "base"){
              obj.position.copy(slots.base.position);
              obj.rotation.copy(slots.base.rotation);
            }

            setStatus(`Loaded ${slotName}.`);
            frameAll();
            resolve(obj);
          },
          (xhr)=>{
            // progress optional
          },
          (err)=>{
            console.error(err);
            setStatus(`ERROR loading ${slotName}. Check DevTools → Network/Console.\nPath: ${path}`);
            reject(err);
          }
        );
      });
    }

    async function loadBase(){
      // base
      await loadFBX(BASE_FBX, "base");
    }

    // Frame everything after load (keeps it visible)
    function frameAll(){
      const box = new THREE.Box3();
      let any = false;
      Object.values(slots).forEach(o=>{
        if (!o) return;
        const b = new THREE.Box3().setFromObject(o);
        if (b.isEmpty()) return;
        box.union(b);
        any = true;
      });

      if (!any){
        controls.target.set(0, 1.2, 0);
        camera.position.set(0, 1.4, 3.0);
        controls.update();
        return;
      }

      const size = new THREE.Vector3();
      const center = new THREE.Vector3();
      box.getSize(size);
      box.getCenter(center);

      const maxDim = Math.max(size.x, size.y, size.z);
      const fitDist = maxDim / (2 * Math.tan(THREE.MathUtils.degToRad(camera.fov * 0.5)));
      const dist = fitDist * 1.35;

      controls.target.copy(center);

      // move camera back on a diagonal
      camera.position.copy(center).add(new THREE.Vector3(dist * 0.55, dist * 0.35, dist * 0.75));
      camera.near = Math.max(0.01, dist / 100);
      camera.far = dist * 100;
      camera.updateProjectionMatrix();
      controls.update();
    }

    /* ==================== TEXTURES (optional) ==================== */
    const texLoader = new THREE.TextureLoader();
    async function applyBaseTextures(){
      if (!slots.base){
        setStatus("Load Base Model first.");
        return;
      }

      setStatus("Loading textures…");

      // Load only what exists; missing files will error in console but won’t break the page
      const loadTex = (url)=> new Promise((res)=>{
        texLoader.load(url, (t)=>{ t.colorSpace = THREE.SRGBColorSpace; res(t); }, undefined, ()=>res(null));
      });

      const map       = await loadTex(TEX.color);
      const alphaMap  = await loadTex(TEX.opacity);
      const roughMap  = await loadTex(TEX.smoothness); // smoothness != roughness, but better than nothing
      const emisMap   = await loadTex(TEX.emission);

      let changed = 0;

      slots.base.traverse((o)=>{
        if (!o.isMesh) return;
        // Replace material with a visible PBR material
        const m = new THREE.MeshStandardMaterial({
          color: 0xffffff,
          map: map || null,
          transparent: !!alphaMap,
          alphaMap: alphaMap || null,
          roughness: 0.9,
          metalness: 0.05,
          roughnessMap: roughMap || null,
          emissive: new THREE.Color(0x000000),
          emissiveMap: emisMap || null,
          emissiveIntensity: emisMap ? 0.6 : 0.0
        });
        o.material = m;
        changed++;
      });

      setStatus(changed ? `Applied textures/material to ${changed} mesh(es).` : "No meshes found to apply textures to.");
    }

    /* ==================== DROPDOWNS ==================== */
    function fillSelect(selectEl, list, slotName){
      selectEl.innerHTML = "";
      list.forEach((p, idx)=>{
        const opt = document.createElement("option");
        opt.value = p.file;
        opt.textContent = p.name;
        selectEl.appendChild(opt);
      });

      selectEl.addEventListener("change", async ()=>{
        // ensure base is loaded first if user equips parts
        if (!slots.base && slotName !== "base"){
          await loadBase();
        }
        await loadFBX(selectEl.value, slotName);
      });
    }

    fillSelect($("selHead"),  PARTS.head,  "head");
    fillSelect($("selHair"),  PARTS.hair,  "hair");
    fillSelect($("selFace"),  PARTS.face,  "face");
    fillSelect($("selTorso"), PARTS.torso, "torso");
    fillSelect($("selArms"),  PARTS.arms,  "arms");
    fillSelect($("selHands"), PARTS.hands, "hands");
    fillSelect($("selHips"),  PARTS.hips,  "hips");
    fillSelect($("selLegs"),  PARTS.legs,  "legs");
    fillSelect($("selFeet"),  PARTS.feet,  "feet");

    /* ==================== BUTTONS ==================== */
    $("btnLoadBase").onclick = ()=>loadBase();
    $("btnResetView").onclick = ()=>frameAll();
    $("btnClear").onclick = ()=>clearAll();
    $("btnApplyTextures").onclick = ()=>applyBaseTextures();

    // Auto-load base if you want:
    // loadBase();

    /* ==================== IMPORTANT: GitHub Pages + LFS ==================== */
    // If your FBX is tracked by Git LFS, GitHub Pages will serve a pointer file instead of the binary.
    // Symptom: model “loads” but is empty / broken, or the file is tiny (KB or bytes).
    // Fix: upload FBX as real binary in repo (no LFS), or switch to .glb.
  </script>
</body>
</html>
