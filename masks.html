<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>DeadPoly Community Hub — Masks</title>

  <style>
    :root{
      --bg:#0b0b0f;
      --panel:#14141b;
      --panel2:#101016;
      --text:#f2f2f2;
      --muted:#b7b7c2;
      --line:#2a2a36;
      --btn:#1c1c26;
      --btnHover:#242434;
    }
    html,body{height:100%;margin:0;background:var(--bg);color:var(--text);font:14px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;}
    a{color:inherit}
    .topbar{
      position:sticky;top:0;z-index:999;
      background:linear-gradient(to bottom, rgba(10,10,14,.92), rgba(10,10,14,.7));
      backdrop-filter: blur(6px);
      border-bottom:1px solid var(--line);
    }
    .topbar-inner{
      max-width:1200px;margin:0 auto;padding:10px 14px;
      display:flex;gap:10px;align-items:center;justify-content:space-between;
    }
    .btn{
      display:inline-flex;align-items:center;gap:8px;
      background:var(--btn);border:1px solid var(--line);color:var(--text);
      padding:8px 10px;border-radius:10px;text-decoration:none;
      transition:transform .08s ease, background .12s ease;
      user-select:none;
    }
    .btn:hover{background:var(--btnHover)}
    .btn:active{transform:scale(.98)}
    .wrap{max-width:1200px;margin:0 auto;padding:18px 14px 40px}
    .title{display:flex;align-items:flex-end;justify-content:space-between;gap:12px;flex-wrap:wrap}
    h1{margin:0;font-size:26px;letter-spacing:.3px}
    .sub{margin:6px 0 0;color:var(--muted)}
    .controls{display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin-top:14px}
    .search{
      flex:1;min-width:240px;
      background:var(--panel);border:1px solid var(--line);border-radius:12px;
      padding:10px 12px;color:var(--text);outline:none;
    }
    .pill{
      background:var(--panel);border:1px solid var(--line);border-radius:999px;
      padding:8px 10px;color:var(--text);cursor:pointer;user-select:none;
    }
    .pill.active{outline:2px solid #ffffff22}
    .section{
      margin-top:16px;
      background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.01));
      border:1px solid var(--line);
      border-radius:16px;
      padding:12px;
    }
    .section h2{margin:0 0 8px;font-size:16px}
    table{width:100%;border-collapse:separate;border-spacing:0 10px}
    th{color:var(--muted);font-weight:600;text-align:left;padding:0 10px}
    td{
      background:rgba(255,255,255,.02);
      border:1px solid var(--line);
      padding:10px;
      vertical-align:middle;
    }
    tr td:first-child{border-radius:12px 0 0 12px}
    tr td:last-child{border-radius:0 12px 12px 0}
    .thumb{
      width:64px;height:64px;object-fit:contain;
      background:rgba(0,0,0,.25);
      border:1px solid rgba(255,255,255,.08);
      border-radius:12px;
      display:block;
    }
    .name{font-weight:700}
    .note{color:var(--muted)}
    .tag{font-size:12px;color:var(--muted);border:1px solid var(--line);padding:3px 8px;border-radius:999px;background:var(--panel2)}
    .rowflex{display:flex;gap:10px;align-items:center}
    .footer{margin-top:14px;color:var(--muted);font-size:12px}
    .nowrap{white-space:nowrap}
  </style>
</head>

<body>
  <div class="topbar">
    <div class="topbar-inner">
      <a class="btn" href="wiki.html">← Wiki Hub</a>
      <div class="sub" style="margin:0">Masks</div>
      <a class="btn" href="https://deadpoly.wiki/Main_Page" target="_blank" rel="noopener">Official Wiki ↗</a>
    </div>
  </div>

  <div class="wrap">
    <div class="title">
      <div>
        <h1>Masks</h1>
        <div class="sub">Local hub page. Images attempt to load from the official wiki by filename.</div>
      </div>
    </div>

    <div class="controls">
      <input id="q" class="search" placeholder="Search (ex: goggles, plague, reaper, squid)..." />
      <div id="filters"></div>
    </div>

    <div id="out"></div>

    <div class="footer">
      If a thumbnail is blank, the file name may not exist on the official wiki, or the wiki may block direct file redirects.
      You can still use your own local images by changing the <span class="tag">img</span> URL builder in the script.
    </div>
  </div>

<script>
  // --- Image helper: tries two common MediaWiki file redirect patterns ---
  function fileUrl(filename){
    const a = "https://deadpoly.wiki/index.php?title=Special:FilePath/" + encodeURIComponent(filename);
    const b = "https://deadpoly.wiki/wiki/Special:FilePath/" + encodeURIComponent(filename);
    return { a, b };
  }

  // --- Data (from your pasted wiki tables) ---
  const sections = [
    {
      title: "Glasses & Goggles (Accessories)",
      key: "Glasses",
      rows: [
        { img:"TM_DefNotGlasses_I.png", name:"Definitely Not Glasses", notes:"These are definitely not glasses" },
        { img:"TM_DefNotGlasses2_I.png", name:"Definitely Not Glasses (Variant)", notes:"These are definitely not glasses" },
        { img:"TM_DefNotGlasses3_I.png", name:"Definitely Not Glasses (Variant)", notes:"These are definitely not glasses" },
        { img:"TM_GlassesPoly_I.png", name:"Poly Glasses", notes:"Apparently if you wear these, you're a gangster" },
        { img:"TM_Goggles_1_Black.png", name:"Goggles (Black)", notes:"Eye protection, probably for skiing" },
        { img:"TM_Goggles_1_Orange.png", name:"Goggles (Orange)", notes:"Eye protection, probably for skiing" },
        { img:"TM_Goggles_1_Purple.png", name:"Goggles (Purple)", notes:"Eye protection, probably for skiing" },
        { img:"TM_Goggles_1_Red.png", name:"Goggles (Red)", notes:"Eye protection, probably for skiing" },
        { img:"TM_Goggles_1_White.png", name:"Goggles (White)", notes:"Eye protection, probably for skiing" },
        { img:"TM_Goggles_2_I.png", name:"Goggles (Steampunk)", notes:"Eye protection, probably for flying something during the renaissance" },
      ]
    },
    {
      title: "Masks",
      key: "Masks",
      rows: [
        { img:"TM_BagMask_1_I.png", name:"Bag Mask (Crazy)", notes:"A bag for those that are crazy" },
        { img:"TM_BagMask_2_I.png", name:"Bag Mask (Sad)", notes:"A bag for those that are sad" },
        { img:"TM_BagMask_3_I.png", name:"Bag Mask (Happy)", notes:"A bag for those that are happy" },
        { img:"TM_BagMask_4_I.png", name:"Bag Mask (Meh)", notes:"A bag for those that are meh" },
        { img:"TM_Blindfold_I.png", name:"Blindfold", notes:"Makes you look like Gojo" },
        { img:"TM_CarnivalMask_1_I.png", name:"Carnival Mask (Red w/Gold)", notes:"Creepy" },
        { img:"TM_CarnivalMask_2_I.png", name:"Carnival Mask (Purple w/Grey)", notes:"Creepy" },
        { img:"TM_CarnivalMask_3_I.png", name:"Carnival Mask (Black w/Grey)", notes:"Creepy" },
        { img:"TM_ChickenHeadB_E.png", name:"Chicken Head (Blue)", notes:"Cockadoodle-do" },
        { img:"TM_ChickenHeadW_E.png", name:"Chicken Head (White)", notes:"Cockadoodle-do" },
        { img:"TM_ChickenHeadY_E.png", name:"Chicken Head (Yellow)", notes:"Cockadoodle-do" },
        { img:"TM_HelmOfMight_E.png", name:"Neck Collar", notes:"You're just kinky if you wear this" },
        { img:"TM_JuggernautMask_I.png", name:"Juggernaut Mask", notes:"An ancient tribal mask" },
        { img:"TM_LightMask_E.png", name:"String Mask", notes:"A creepily made string mask" },
        { img:"TM_LokiHelm_I.png", name:"Crown of the Trickster", notes:"Tell Thor I said hi" },
        { img:"TM_LolLambMask_I.png", name:"Mask of the Lamb", notes:"And everywhere Lamb went..." },
        { img:"TM_LolWolfMask_I.png", name:"Mask of the Wolf", notes:"...Wolf was sure to follow!" },
        { img:"TM_MaskAkuAku_E.png", name:"Aku Aku Mask", notes:"Some sort of islander mask, probably from Moana or something" },
        { img:"TM_MaskArcane_E.png", name:"Arcane Mask", notes:"Kind of looks like a sci-fi gas mask" },
        { img:"TM_MaskCartoonz_I.png", name:"Cartoonz Mask", notes:"" },
        { img:"TM_MaskFilter_I.png", name:"Mask Filter (Grey)", notes:"To aid in breathing while gasses are present" },
        { img:"TM_MaskGas_1_I.png", name:"Gas Mask (Yellow)", notes:"To aid in breathing while gasses are present" },
        { img:"TM_MaskFilter_I.png", name:"Gas Mask (Black)", notes:"To aid in breathing while gasses are present" },
        { img:"TM_MaskMKSmoke_E.png", name:"Smoke Mask", notes:"Mortal Combat reference?" },
        { img:"TM_MaskScorpion_E.png", name:"Scorpion Mask", notes:"Mortal Combat reference?" },
        { img:"TM_MaskSubZero_E.png", name:"Sub Zero Mask", notes:"Mortal Combat reference?" },
        { img:"TM_MaskRedX_I.png", name:"Red X Mask", notes:"Definitely a Teen Titans reference" },
        { img:"TM_MaskShapeCircle_E.png", name:"Circle Mask", notes:"Squid game reference for sure" },
        { img:"TM_MaskShapeSquare_E.png", name:"Square Mask", notes:"Squid game reference for sure" },
        { img:"TM_MaskShapeTriangle_E.png", name:"Triangle Mask", notes:"Squid game reference for sure" },
        { img:"TM_MaskSurgical_I.png", name:"Surgical Mask", notes:"The mask of a skilled surgeon" },
        { img:"TM_MetalCollar_2_I.png", name:"Metal Collar (Grey)", notes:"Comes in other variants" },
        { img:"TM_MetalCollar_Blue_I.png", name:"Metal Collar (Blue)", notes:"Comes in other variants" },
        { img:"TM_MetalCollar_Green_I.png", name:"Metal Collar (Green)", notes:"Comes in other variants" },
        { img:"TM_MetalCollar_Plain_I.png", name:"Metal Collar (Also Grey)", notes:"Comes in other variants" },
        { img:"TM_MetalCollar_Red_I.png", name:"Metal Collar (Red)", notes:"Comes in other variants" },
        { img:"TM_PandaHead_E.png", name:"Panda Head", notes:"Do you like pandas?" },
        { img:"TM_PlagueMask_E.png", name:"Plague Doctor Mask", notes:"A mask doctors wore back when Bubonic plague was an issue" },
        { img:"TM_PumpkinMask_E.png", name:"Pumpkin Mask", notes:"Only available during Halloween" },
        { img:"TM_ReaperMaskB_E.png", name:"Reaper Mask (Black)", notes:"Nerf Reaper" },
        { img:"TM_ReaperMaskW_E.png", name:"Reaper Mask (White)", notes:"Nerf Reaper" },
        { img:"TM_ShamanMask_1_I.png", name:"Shaman Mask (White/Black)", notes:"Another slightly less intimidating tribal mask" },
        { img:"TM_ShamanMask_I.png", name:"Shaman Mask (Tan/Red)", notes:"Another slightly less intimidating tribal mask" },
        { img:"TM_SkullMask_1_I.png", name:"Skull Mask (Red/Black)", notes:"Typical Apocalypse mask" },
        { img:"TM_SkullMask_2_I.png", name:"Skull Mask (Blue/Black)", notes:"Typical Apocalypse mask" },
        { img:"TM_SkullMask_3_I.png", name:"Skull Mask (Pink/Black)", notes:"Typical Apocalypse mask" },
        { img:"TM_SwirlMask_E.png", name:"Swirl Mask", notes:"Reminds me of Saw" },
      ]
    },
    {
      title: "Emotional Masks",
      key: "Emotional",
      rows: [
        { img:"TM_MoB_E.png", name:"Mask of Badness", notes:"Not sure what these do yet but they'll have a use soon", stat:"1-100" },
        { img:"TM_MoG_E.png", name:"Mask of Gladness", notes:"Not sure what these do yet but they'll have a use soon", stat:"1-100" },
        { img:"TM_MoM_E.png", name:"Mask of Madness", notes:"Not sure what these do yet but they'll have a use soon", stat:"1-100" },
        { img:"TM_MoR_E.png", name:"Mask of Radness", notes:"Not sure what these do yet but they'll have a use soon", stat:"1-100" },
        { img:"TM_MoS_E.png", name:"Mask of Sadness", notes:"Not sure what these do yet but they'll have a use soon", stat:"1-100" },
      ]
    }
  ];

  const allKeys = ["All", ...new Set(sections.map(s => s.key))];

  const filtersEl = document.getElementById("filters");
  let active = "All";
  allKeys.forEach(k => {
    const b = document.createElement("button");
    b.className = "pill" + (k===active ? " active" : "");
    b.textContent = k;
    b.onclick = () => {
      active = k;
      [...filtersEl.children].forEach(x => x.classList.remove("active"));
      b.classList.add("active");
      render();
    };
    filtersEl.appendChild(b);
  });

  const qEl = document.getElementById("q");
  qEl.addEventListener("input", render);

  function matchesRow(r, q){
    if (!q) return true;
    const hay = (r.name + " " + (r.notes||"") + " " + (r.stat||"")).toLowerCase();
    return hay.includes(q.toLowerCase());
  }

  function render(){
    const out = document.getElementById("out");
    out.innerHTML = "";
    const q = qEl.value.trim();

    sections
      .filter(s => active==="All" ? true : s.key===active)
      .forEach(s => {
        const sec = document.createElement("div");
        sec.className = "section";
        sec.innerHTML = `<h2>${escapeHtml(s.title)} <span class="tag">${escapeHtml(s.key)}</span></h2>`;

        const table = document.createElement("table");
        const hasStat = s.rows.some(r => r.stat);
        table.innerHTML = `
          <thead>
            <tr>
              <th class="nowrap">Image</th>
              <th>Name</th>
              ${hasStat ? `<th class="nowrap">Stat</th>` : ``}
              <th>Notes</th>
            </tr>
          </thead>
          <tbody></tbody>
        `;
        const tbody = table.querySelector("tbody");

        s.rows
          .filter(r => matchesRow(r, q))
          .forEach(r => {
            const {a,b} = fileUrl(r.img);
            const tr = document.createElement("tr");
            tr.innerHTML = `
              <td style="width:84px">
                <img class="thumb" alt="${escapeHtml(r.img)}"
                     src="${a}"
                     onerror="this.onerror=null; this.src='${b}';" />
              </td>
              <td><div class="name">${escapeHtml(r.name)}</div></td>
              ${hasStat ? `<td class="nowrap">${escapeHtml(r.stat||"—")}</td>` : ``}
              <td><div class="note">${escapeHtml(r.notes||"")}</div></td>
            `;
            tbody.appendChild(tr);
          });

        sec.appendChild(table);
        out.appendChild(sec);
      });
  }

  function escapeHtml(s){
    return String(s).replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]));
  }

  render();
</script>
</body>
</html>
