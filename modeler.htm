<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>DeadPoly Hub — Character Modeler</title>
  <link rel="stylesheet" href="modeler.css" />

  <!-- Option A (simple): load Three.js from CDN.
       If you want ZERO CDN, see notes at bottom and host /vendor/ locally. -->
  <script type="importmap">
  {
    "imports": {
      "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
      "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
    }
  }
  </script>
</head>
<body>
  <div class="topbar">
    <div class="topbar-inner">
      <div class="top-left">
        <a class="btn" href="index.html">← Menu</a>
        <div class="brand">Tools <span class="badge">Character Modeler</span></div>
      </div>
      <div class="top-right">
        <button class="btn" id="resetBtn" type="button">Reset</button>
        <button class="btn" id="screenshotBtn" type="button">Screenshot</button>
      </div>
    </div>
  </div>

  <div class="container">
    <div class="shell">
      <div class="panel side">
        <h2>Character Slots</h2>
        <div class="muted">Swap gear. Drag & drop FBX onto the viewer, or use the picker.</div>

        <div class="slot">
          <label>Base Character (FBX)</label>
          <div class="row">
            <input class="text" id="basePath" value="models/SK_BaseModel.fbx" />
            <button class="btn" id="loadBaseBtn" type="button">Load</button>
          </div>
          <div class="small muted">
            Put your base FBX at <span class="code">models/SK_BaseModel.fbx</span> (or change path).
          </div>
        </div>

        <div class="hr"></div>

        <div class="slotgrid">
          <div class="slot">
            <label>Shirt</label>
            <div class="row">
              <select id="shirtSel"></select>
              <button class="btn small" data-clear="shirt" type="button">Clear</button>
            </div>
          </div>

          <div class="slot">
            <label>Pants</label>
            <div class="row">
              <select id="pantsSel"></select>
              <button class="btn small" data-clear="pants" type="button">Clear</button>
            </div>
          </div>

          <div class="slot">
            <label>Shoes</label>
            <div class="row">
              <select id="shoesSel"></select>
              <button class="btn small" data-clear="shoes" type="button">Clear</button>
            </div>
          </div>

          <div class="slot">
            <label>Helmet</label>
            <div class="row">
              <select id="helmetSel"></select>
              <button class="btn small" data-clear="helmet" type="button">Clear</button>
            </div>
          </div>

          <div class="slot">
            <label>Mask</label>
            <div class="row">
              <select id="maskSel"></select>
              <button class="btn small" data-clear="mask" type="button">Clear</button>
            </div>
          </div>

          <div class="slot">
            <label>Backpack</label>
            <div class="row">
              <select id="backpackSel"></select>
              <button class="btn small" data-clear="backpack" type="button">Clear</button>
            </div>
          </div>
        </div>

        <div class="hr"></div>

        <div class="slot">
          <label>Load Local FBX Into Slot</label>
          <div class="row">
            <select id="localSlotSel">
              <option value="shirt">Shirt</option>
              <option value="pants">Pants</option>
              <option value="shoes">Shoes</option>
              <option value="helmet">Helmet</option>
              <option value="mask">Mask</option>
              <option value="backpack">Backpack</option>
            </select>
            <input id="fileInput" type="file" accept=".fbx" />
          </div>
          <div class="small muted">Tip: drag an FBX onto the viewer to load it into the selected slot.</div>
        </div>

        <div class="hr"></div>

        <div class="slot">
          <label>Viewer</label>
          <div class="small muted">
            RMB drag = orbit • MMB drag = pan • wheel = zoom
          </div>
          <div class="small muted">
            If parts load but look “exploded” or offset: the part is not skinned to the same skeleton / bone names.
          </div>
        </div>
      </div>

      <div class="panel main">
        <div class="hero">
          <div>
            <h1>Modular Character Builder</h1>
            <div class="sub">Base + interchangeable slots. Uses skeleton re-binding so clothing follows the base rig.</div>
          </div>
          <div class="badge" id="statusBadge">Ready</div>
        </div>

        <div id="dropHint" class="dropHint" aria-hidden="true">
          Drop FBX to load into selected slot
        </div>

        <div id="viewer" class="viewer"></div>

        <div class="section">
          <h2>How it works</h2>
          <div class="small muted">
            Each modular part FBX should be a skinned mesh rigged to the same bone names as the base.
            This app loads the base skeleton, then binds modular skinned meshes to that skeleton.
          </div>
        </div>
      </div>
    </div>
  </div>

  <script type="module" src="modeler.js"></script>
</body>
</html>
