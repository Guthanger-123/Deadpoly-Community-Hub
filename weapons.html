<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>DeadPoly Community Hub — Weapons</title>

  <style>
    :root{
      --bg:#0b0b0f;
      --panel:#14141b;
      --panel2:#101016;
      --text:#f2f2f2;
      --muted:#b7b7c2;
      --line:#2a2a36;
      --btn:#1c1c26;
      --btnHover:#242434;
    }
    html,body{height:100%;margin:0;background:var(--bg);color:var(--text);font:14px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;}
    a{color:inherit}
    .topbar{
      position:sticky;top:0;z-index:999;
      background:linear-gradient(to bottom, rgba(10,10,14,.92), rgba(10,10,14,.7));
      backdrop-filter: blur(6px);
      border-bottom:1px solid var(--line);
    }
    .topbar-inner{
      max-width:1200px;margin:0 auto;padding:10px 14px;
      display:flex;gap:10px;align-items:center;justify-content:space-between;
    }
    .btn{
      display:inline-flex;align-items:center;gap:8px;
      background:var(--btn);border:1px solid var(--line);color:var(--text);
      padding:8px 10px;border-radius:10px;text-decoration:none;
      transition:transform .08s ease, background .12s ease;
      user-select:none;
    }
    .btn:hover{background:var(--btnHover)}
    .btn:active{transform:scale(.98)}
    .wrap{max-width:1200px;margin:0 auto;padding:18px 14px 40px}
    .title{display:flex;align-items:flex-end;justify-content:space-between;gap:12px;flex-wrap:wrap}
    h1{margin:0;font-size:26px;letter-spacing:.3px}
    .sub{margin:6px 0 0;color:var(--muted)}
    .controls{display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin-top:14px}
    .search{
      flex:1;min-width:240px;
      background:var(--panel);border:1px solid var(--line);border-radius:12px;
      padding:10px 12px;color:var(--text);outline:none;
    }
    .pill{
      background:var(--panel);border:1px solid var(--line);border-radius:999px;
      padding:8px 10px;color:var(--text);cursor:pointer;user-select:none;
    }
    .pill.active{outline:2px solid #ffffff22}
    .section{
      margin-top:16px;
      background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.01));
      border:1px solid var(--line);
      border-radius:16px;
      padding:12px;
    }
    .section h2{margin:0 0 8px;font-size:16px}
    table{width:100%;border-collapse:separate;border-spacing:0 10px}
    th{color:var(--muted);font-weight:600;text-align:left;padding:0 10px}
    td{
      background:rgba(255,255,255,.02);
      border:1px solid var(--line);
      padding:10px;
      vertical-align:middle;
    }
    tr td:first-child{border-radius:12px 0 0 12px}
    tr td:last-child{border-radius:0 12px 12px 0}
    .thumb{
      width:84px;height:64px;object-fit:contain;
      background:rgba(0,0,0,.25);
      border:1px solid rgba(255,255,255,.08);
      border-radius:12px;
      display:block;
    }
    .name{font-weight:700}
    .note{color:var(--muted)}
    .tag{font-size:12px;color:var(--muted);border:1px solid var(--line);padding:3px 8px;border-radius:999px;background:var(--panel2)}
    .nowrap{white-space:nowrap}
    .footer{margin-top:14px;color:var(--muted);font-size:12px}
  </style>
</head>

<body>
  <div class="topbar">
    <div class="topbar-inner">
      <a class="btn" href="wiki.html">← Wiki Hub</a>
      <div class="sub" style="margin:0">Weapons</div>
      <a class="btn" href="https://deadpoly.wiki/Main_Page" target="_blank" rel="noopener">Official Wiki ↗</a>
    </div>
  </div>

  <div class="wrap">
    <div class="title">
      <div>
        <h1>Weapons</h1>
        <div class="sub">Filter + search. Images attempt to load from official wiki by filename.</div>
      </div>
    </div>

    <div class="controls">
      <input id="q" class="search" placeholder="Search (ex: AKM, AUG, crowbar, VSS, flashlight)..." />
      <div id="filters"></div>
    </div>

    <div id="out"></div>

    <div class="footer">
      Categories: <span class="tag">Melee</span> <span class="tag">Firearms</span> <span class="tag">Utility</span>.
      If thumbnails don’t load, verify the filename exists on the official wiki.
    </div>
  </div>

<script>
  function fileUrl(filename){
    const a = "https://deadpoly.wiki/index.php?title=Special:FilePath/" + encodeURIComponent(filename);
    const b = "https://deadpoly.wiki/wiki/Special:FilePath/" + encodeURIComponent(filename);
    return { a, b };
  }

  // --- Data (from your pasted weapons page text) ---
  // Type is used for the top filter: Melee / Firearms / Utility
  const groups = [
    {
      group: "Melee Weapons",
      type: "Melee",
      columns: ["Weapon","Damage","Woodcutting","Mining","Notes"],
      rows: [
        { name:"Broom", img:"dpBroom.png", damage:"N/A", wood:"N", mine:"N", notes:"" },
        { name:"Carnival Bat", img:"dpCarnivalBat-Blue.png", damage:"N/A", wood:"N", mine:"N", notes:"Multiple variations exist" },
        { name:"Crowbar", img:"dpCrowbar.png", damage:"11-17", wood:"Y", mine:"Y", notes:"" },
        { name:"Crutch", img:"dpCrutch.png", damage:"N/A", wood:"N", mine:"N", notes:"" },
        { name:"Dead End Sign", img:"dpDeadEndSign.png", damage:"N/A", wood:"N", mine:"N", notes:"" },
        { name:"Dustpan", img:"dpdustpan.png", damage:"N/A", wood:"N", mine:"N", notes:"" },
        { name:"Eternal Sky", img:"DpEternalSky.png", damage:"N/A", wood:"N", mine:"N", notes:"" },
        { name:"Fireaxe", img:"dpFireAxe.png", damage:"N/A", wood:"Y", mine:"N", notes:"" },
        { name:"Fireaxe (Modified)", img:"dpFireAxeModded.png", damage:"14-15", wood:"Y", mine:"Y", notes:"" },
        { name:"Flamberge", img:"dpflamberge.png", damage:"20-", wood:"Y", mine:"Y", notes:"" },
        { name:"Glaive", img:"dp_glaive.png", damage:"N/A", wood:"Y", mine:"N", notes:"Red/Silver and Purple/Green variations exist" },
        { name:"Golf Club", img:"dpGolfClub.png", damage:"N/A", wood:"N", mine:"N", notes:"" },
        { name:"Hockey Stick", img:"dpHockeyStickRed.png", damage:"N/A", wood:"N", mine:"N", notes:"Multiple variations exist" },
        { name:"Hunter's Hatchet", img:"dpHunterHatchetGreen.png", damage:"N/A", wood:"Y", mine:"N", notes:"Multiple variations exist" },
        { name:"Ice Pick", img:"dpIcePickRed.png", damage:"12-15", wood:"Y", mine:"N", notes:"Multiple variations exist" },
        { name:"Knife (Standard)", img:"dpKnifeBlack.png", damage:"N/A", wood:"N", mine:"N", notes:"Multiple variations exist" },
        { name:"Knife (Butcher's)", img:"dpKnifeButcher.png", damage:"11-13", wood:"N", mine:"N", notes:"" },
        { name:"Knife (Kitchen)", img:"dpKnifeKitchen.png", damage:"N/A", wood:"N", mine:"N", notes:"" },
        { name:"Knuckles", img:"dpKnucklesStandard.png", damage:"N/A", wood:"N", mine:"N", notes:"Spiked knuckle variant exists" },
        { name:"Looseal", img:"dpLooseal.png", damage:"N/A", wood:"N", mine:"N", notes:"" },
        { name:"Machete", img:"dpMachete.png", damage:"N/A", wood:"Y", mine:"N", notes:"" },
        { name:"MasterSword", img:"dpMasterSword.png", damage:"N/A", wood:"N", mine:"N", notes:"" },
        { name:"Peel", img:"dpPeel.png", damage:"N/A", wood:"N", mine:"N", notes:"" },
        { name:"SkullCrusher", img:"dpSkullCrusher.png", damage:"N/A", wood:"N", mine:"N", notes:"Pink 'SkullShusher' variant exists" },
        { name:"Sledgehammer", img:"dpSledgehammer.png", damage:"11-15", wood:"Y", mine:"Y", notes:"" },
        { name:"Stop Sign", img:"dpStopSign.png", damage:"N/A", wood:"N", mine:"N", notes:"" },
        { name:"Traffic Light Whacker", img:"dpTrafficLightWhacker.png", damage:"N/A", wood:"N", mine:"N", notes:"" },
        { name:"Wakizashi", img:"dpWakizashiPurple.png", damage:"12-", wood:"Y", mine:"N", notes:"Multiple variations exist" },
        { name:"Waraxe", img:"dpWaraxe.png", damage:"N/A", wood:"Y", mine:"N", notes:"" },
        { name:"WarHammer", img:"dpWarhammerRed.png", damage:"N/A", wood:"Y", mine:"Y", notes:"" },
        { name:"Will of the Emperor", img:"DpEmperorsWill.png", damage:"13-", wood:"Y", mine:"N", notes:"" },
      ]
    },

    {
      group: "Assault Rifles",
      type: "Firearms",
      columns: ["Weapon","Caliber","Notes"],
      rows: [
        { name:"AKM", img:"DpAkm.png", caliber:"7.62x39mm", notes:"" },
        { name:"AUG", img:"DpAUGTan.png", caliber:"5.56x45mm", notes:"" },
        { name:"FAMAS", img:"dpfamas.png", caliber:"5.56x45mm", notes:"" },
        { name:"FN FAL", img:"dpFNFAL.png", caliber:"7.62x39mm", notes:"" },
        { name:"G36C", img:"DPg36c.png", caliber:"5.56x45mm", notes:"" },
        { name:"Groza", img:"DPGroza.png", caliber:"7.62x39mm", notes:"Integrally suppressed; good for new characters without suppressor attachments" },
        { name:"M4", img:"DpM4A1.png", caliber:"5.56x45mm", notes:"" },
        { name:"Mini-14", img:"DpMini14.png", caliber:"5.56x45mm", notes:"" },
        { name:"MDR (Black)", img:"DpMDR762.png", caliber:"7.62x39mm", notes:"Black MDR is chambered in 7.62mm" },
        { name:"MDR (Tan)", img:"DpMDR556.png", caliber:"5.56x45mm", notes:"Tan MDR is chambered in 5.56mm" },
        { name:"Mutant", img:"dpMutant.png", caliber:"7.62x39mm", notes:"" },
        { name:"SCAR-H", img:"DPscar-h.png", caliber:"7.62x39mm", notes:"" },
        { name:"SCAR-L", img:"dpscar-l.png", caliber:"5.56x45mm", notes:"" },
      ]
    },

    {
      group: "Sniper Rifles",
      type: "Firearms",
      columns: ["Weapon","Caliber","Notes"],
      rows: [
        { name:"Karabiner 98k", img:"dpkar98k.png", caliber:"7.62mm", notes:"" },
        { name:"M24", img:"dpM24.png", caliber:"7.62mm", notes:"" },
        { name:"VSS Vintorez", img:"dpVSS.png", caliber:"7.62mm", notes:"" },
      ]
    },

    {
      group: "Submachine Guns",
      type: "Firearms",
      columns: ["Weapon","Caliber","Notes"],
      rows: [
        { name:"Vector", img:"DPvector.png", caliber:"9x19mm", notes:"" },
        { name:"MP5", img:"DpMP5.png", caliber:"9x19mm", notes:"" },
        { name:"UMP", img:"DpUmp.png", caliber:"9x19mm", notes:"" },
        { name:"MP7", img:"DpMP7Tan.png", caliber:"5.56mm", notes:"" },
      ]
    },

    {
      group: "Shotguns",
      type: "Firearms",
      columns: ["Weapon","Caliber","Notes"],
      rows: [
        { name:"Model 12", img:"DpModel2.png", caliber:"12-Ga Buckshot", notes:"" },
      ]
    },

    {
      group: "Bows",
      type: "Utility",
      columns: ["Weapon","Ammo","Notes"],
      rows: [
        { name:"Crossbow", img:"crossbow.png", ammo:"Arrows (Bolts)", notes:"" },
        { name:"Compound Crossbow", img:"compound.png", ammo:"Arrows (Bolts)", notes:"" },
      ]
    },

    {
      group: "Power Tools",
      type: "Utility",
      columns: ["Tool","Ammo","Notes"],
      rows: [
        { name:"Nail Gun", img:"nailgun.png", ammo:"Nails", notes:"" },
      ]
    },

    {
      group: "Non-Weapons (Utility)",
      type: "Utility",
      columns: ["Item","Weight","Use Case"],
      rows: [
        { name:"Maglite Flashlight", img:"Maglite Flashlight.png", weight:"1 KG", use:"Small hand-held flashlight" },
        { name:"Lantern Flashlight", img:"lantern flashlight.png", weight:"2 KG", use:"Large hand-held flashlight" },
        { name:"Red Devil Flashlight", img:"red devil flashlight.png", weight:"0.25 KG", use:"Small hand-held flashlight" },
      ]
    }
  ];

  const filters = ["All","Melee","Firearms","Utility"];
  const filtersEl = document.getElementById("filters");
  let active = "All";

  filters.forEach(k => {
    const b = document.createElement("button");
    b.className = "pill" + (k===active ? " active" : "");
    b.textContent = k;
    b.onclick = () => {
      active = k;
      [...filtersEl.children].forEach(x => x.classList.remove("active"));
      b.classList.add("active");
      render();
    };
    filtersEl.appendChild(b);
  });

  const qEl = document.getElementById("q");
  qEl.addEventListener("input", render);

  function rowMatches(r, q){
    if (!q) return true;
    const hay = Object.values(r).join(" ").toLowerCase();
    return hay.includes(q.toLowerCase());
  }

  function render(){
    const out = document.getElementById("out");
    out.innerHTML = "";
    const q = qEl.value.trim();

    groups
      .filter(g => active==="All" ? true : g.type===active)
      .forEach(g => {
        const sec = document.createElement("div");
        sec.className = "section";
        sec.innerHTML = `<h2>${escapeHtml(g.group)} <span class="tag">${escapeHtml(g.type)}</span></h2>`;

        const table = document.createElement("table");
        const cols = g.columns;
        table.innerHTML = `
          <thead>
            <tr>
              <th class="nowrap">Image</th>
              ${cols.map(c => `<th>${escapeHtml(c)}</th>`).join("")}
            </tr>
          </thead>
          <tbody></tbody>
        `;
        const tbody = table.querySelector("tbody");

        g.rows
          .filter(r => rowMatches(r, q))
          .forEach(r => {
            const {a,b} = fileUrl(r.img || "");
            const tr = document.createElement("tr");

            // Build cells based on group columns
            const cells = cols.map(c => {
              const key = c.toLowerCase().replace(/[^a-z]+/g,""); // rough
              // map column names to object keys:
              if (c === "Weapon" || c==="Tool" || c==="Item") return `<td><div class="name">${escapeHtml(r.name||"")}</div></td>`;
              if (c === "Damage") return `<td class="nowrap">${escapeHtml(r.damage||"")}</td>`;
              if (c === "Woodcutting") return `<td class="nowrap">${escapeHtml(r.wood||"")}</td>`;
              if (c === "Mining") return `<td class="nowrap">${escapeHtml(r.mine||"")}</td>`;
              if (c === "Caliber") return `<td class="nowrap">${escapeHtml(r.caliber||"")}</td>`;
              if (c === "Ammo") return `<td class="nowrap">${escapeHtml(r.ammo||"")}</td>`;
              if (c === "Weight") return `<td class="nowrap">${escapeHtml(r.weight||"")}</td>`;
              if (c === "Use Case") return `<td>${escapeHtml(r.use||"")}</td>`;
              if (c === "Notes" || c === "Additional Notes") return `<td><div class="note">${escapeHtml(r.notes||"")}</div></td>`;
              return `<td>${escapeHtml(r[key]||"")}</td>`;
            }).join("");

            tr.innerHTML = `
              <td style="width:104px">
                ${r.img ? `
                  <img class="thumb" alt="${escapeHtml(r.img)}"
                       src="${a}"
                       onerror="this.onerror=null; this.src='${b}';" />
                ` : ``}
              </td>
              ${cells}
            `;
            tbody.appendChild(tr);
          });

        sec.appendChild(table);
        out.appendChild(sec);
      });
  }

  function escapeHtml(s){
    return String(s).replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]));
  }

  render();
</script>
</body>
</html>
